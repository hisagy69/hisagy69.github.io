$(document).ready(function(){var e=$(".modal-thanks");$(function(){modalClose=$(".modal-thanks__close"),modalClose.on("click",function(){e.toggleClass("modal-thanks_visible")}),$(document).mouseup(function(n){e.is(n.target)&&e.toggleClass("modal-thanks_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal-thanks_visible").length&&e.toggleClass("modal-thanks_visible")})});var n=$(".modal1");$(".btn1").on("click",function(){n.toggleClass("modal1_visible"),$(".modal1__close").on("click",function(){n.removeClass("modal1_visible")}),$(document).mouseup(function(e){n.is(e.target)&&n.removeClass("modal1_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal1_visible").length&&n.removeClass("modal1_visible")})});var o=$(".modal2");$(".btn2").on("click",function(){o.toggleClass("modal2_visible"),$(".modal2__close").on("click",function(){o.removeClass("modal2_visible")}),$(document).mouseup(function(e){o.is(e.target)&&o.removeClass("modal2_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal2_visible").length&&o.removeClass("modal2_visible")})});var i=$(".modal3");$(".btn3").on("click",function(){i.toggleClass("modal3_visible"),$(".modal3__close").on("click",function(){i.removeClass("modal3_visible")}),$(document).mouseup(function(e){i.is(e.target)&&i.removeClass("modal3_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal3_visible").length&&i.removeClass("modal3_visible")})});var t=$(".modal4");$(".btn4").on("click",function(){t.toggleClass("modal4_visible"),$(".modal4__close").on("click",function(){t.removeClass("modal4_visible")}),$(document).mouseup(function(e){t.is(e.target)&&t.removeClass("modal4_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal4_visible").length&&t.removeClass("modal4_visible")})});var a=$(".modal5");$(".btn5").on("click",function(){a.toggleClass("modal5_visible"),$(".modal5__close").on("click",function(){a.removeClass("modal5_visible")}),$(document).mouseup(function(e){a.is(e.target)&&a.removeClass("modal5_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal5_visible").length&&a.removeClass("modal5_visible")})});var l=$(".modal6");$(".btn6").on("click",function(){l.toggleClass("modal6_visible"),$(".modal6__close").on("click",function(){l.removeClass("modal6_visible")}),$(document).mouseup(function(e){l.is(e.target)&&l.removeClass("modal6_visible")}),$(document).on("keydown",function(){27==event.keyCode&&1==$(".modal6_visible").length&&l.removeClass("modal6_visible")})}),$(function(){$(".hero__form").validate({rules:{userName:{required:!0,minlength:2},userEmail:{required:!0,email:!0},userPhone:{required:!0,minlength:16}},errorElement:"em",errorClass:"invalid",messages:{userName:{required:"имя обязательно",minlength:"имя длиннее двух символов"},userEmail:{required:"Email обязательно",email:"введите email"},userPhone:{required:"телефон обязателен",minlength:"введите корректный номер"}},submitHandler:function(n){$.ajax({type:"POST",url:"send.php",data:$(n).serialize(),success:function(o){console.log("Ajax сработал. Ответ сервера: "+o),$(n)[0].reset(),e.toggleClass("modal-thanks_visible")}})}}),$(".personal__form").validate({rules:{userName:{required:!0,minlength:2},userEmail:{required:!0,email:!0},userPhone:{required:!0,minlength:16}},errorElement:"em",errorClass:"invalid2",messages:{userName:{required:"имя обязательно",minlength:"имя длиннее двух символов"},userEmail:{required:"Email обязательно",email:"введите email"},userPhone:{required:"телефон обязателен",minlength:"введите корректный номер"}},submitHandler:function(n){$.ajax({type:"POST",url:"send.php",data:$(n).serialize(),success:function(o){console.log("Ajax сработал. Ответ сервера: "+o),$(n)[0].reset(),e.toggleClass("modal-thanks_visible")}})}})}),$("[type=tel]").mask("+7(000) 000 00-00");new Swiper(".swiper-container#slider1",{direction:"horizontal",loop:!0,pagination:{el:"#slider1 .swiper-pagination",clickable:!0},navigation:{nextEl:"#slider1 .swiper-button-next",prevEl:"#slider1 .swiper-button-prev"}}),new Swiper(".swiper-container#slider2",{direction:"horizontal",loop:!1,slidePerView:1,pagination:{el:"#slider2 .swiper-pagination",clickable:!0},navigation:{nextEl:"#slider2 .swiper-button-next",prevEl:"#slider2 .swiper-button-prev"}})});var myMapTemp,myPlacemarkTemp,spinner=$(".map").children(".loader"),check_if_load=!1;function init(){var e=new ymaps.Map("map-yandex",{center:[55.738024,37.510322],zoom:17,controls:["zoomControl"]});e.behaviors.disable("scrollZoom");var n=new ymaps.Placemark([55.738024,37.510322],{balloonContent:"Здесь может быть ваш адрес"},{iconLayout:"default#imageWithContent",iconImageHref:"../img/map-marker.png",iconImageSize:[412,200],iconImageOffset:[-25,-50]});e.geoObjects.add(n),waitForTilesLoad(e.layers.get(0).get(0)).then(function(){spinner.removeClass("is-active")})}function waitForTilesLoad(e){return new ymaps.vow.Promise(function(n,o){var i=getTileContainer(e),t=!0;i.tiles.each(function(e,n){e.isReady()||(t=!1)}),t?n():i.events.once("ready",function(){n()})})}function getTileContainer(e){for(var n in e)if(e.hasOwnProperty(n)&&(e[n]instanceof ymaps.layer.tileContainer.CanvasContainer||e[n]instanceof ymaps.layer.tileContainer.DomContainer))return e[n];return null}function loadScript(e,n){var o=document.createElement("script");o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,n())}:o.onload=function(){n()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}var ymap=function(){$(".map").mouseenter(function(){check_if_load||(check_if_load=!0,spinner.addClass("is-active"),loadScript("https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1",function(){ymaps.load(init)}))})};function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}$(function(){ymap()}),r(function(){if(document.getElementsByClassName)e=document.getElementsByClassName("youtube");else var e=function(e,n){for(var o=[],i=new RegExp("(^| )"+n+"( |$)"),t=e.getElementsByTagName("*"),a=0,l=t.length;a<l;a++)i.test(t[a].className)&&o.push(t[a]);return o}(document.body,"youtube");for(var n=e.length,o=0;o<n;o++){var i=document.createElement("div");i.setAttribute("class","play"),e[o].appendChild(i),e[o].onclick=function(){var e=document.createElement("iframe"),n="https://www.youtube.com/embed/"+this.id+"?autoplay=1&autohide=1";this.getAttribute("data-params")&&(n+="&"+this.getAttribute("data-params")),e.setAttribute("src",n),e.setAttribute("frameborder","0"),e.style.width=this.style.width,e.style.height=this.style.height,this.parentNode.replaceChild(e,this)}}});